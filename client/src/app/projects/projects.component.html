<section id="project" class="projects">
    <h1>Projects</h1>
    <div class="project-org">
        <div class="project-select">
        <div *ngIf="isLoggedIn">
            <button (click)="toggleAdding()">Add</button>
        </div>
        <ul>
            <li *ngFor="let project of projects">
                <h3 (click)="toggleSelectedProject(project)">{{project.projectTitle}}</h3>
            </li>
        </ul>
        </div>

        <div class="project-form"*ngIf="isAdding; else display">
            <h2>Add a Project</h2>
            <form [formGroup]="projectForm" (submit)="submitProject()">
                <label for="">Title</label>
                <input formControlName="projectTitle" type="text" name="title">
                <br>
                <label for="">Description</label>
                <input formControlName="projectDescription" type="text" name="desc">
                <br>
                <div>
                    <label for="">Tech</label>
                    <input type="text" name="addTech" id="addTechInput">
                    <button type="button" (click)="$event.preventDefault; addTech()">Add Tech</button>
                    <br>
                    <div id="techChoices" *ngFor="let tech of techValues">
                        <li>{{tech}} <button type="button" (click)="removeTech(tech)">X</button></li>
                    </div>
                    <input type="hidden" formControlName="projectTech" name="tech" value="{{techValues}}">

                </div>
                <br>
                <label for="">URL</label>
                <input formControlName="projectUrl" type="url" name="url">
                <br>
                <button 
                type="submit"
                class="btn btn-primary"
                [disabled]="projectForm.invalid || techValues.length < 1"
                >Submit</button>
            </form>
        </div>

        <ng-template #display>
        <div *ngIf="selectedProject" class="project-container">
            <app-project-card
            [projects]="projects"
            (change)="addUpdatedItem($event)"
            (delete)="removeDeletedItem($event)"
            [project]="selectedProject"
            [updateProject]="updateProject"
            [addTech]="addTech"
            [removeTech]="removeTech"
            [isLoggedIn]="isLoggedIn"
            >
            </app-project-card>
        </div>
        </ng-template>
    </div>
    
  </section>
